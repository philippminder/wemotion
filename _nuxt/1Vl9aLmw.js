const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Cfniytrd.js","./BL1nM7kN.js","./entry.Dt7syhwp.css","./CGu2GQek.js"])))=>i.map(i=>d[i]);
import{z as k,ac as B,b as F}from"./BL1nM7kN.js";import{t as P,b as H}from"./CGu2GQek.js";const q=/\d/,M=["-","_","/","."];function Q(t=""){if(!q.test(t))return t!==t.toLowerCase()}function j(t,s){const e=M,n=[];if(!t||typeof t!="string")return n;let i="",r,o;for(const c of t){const u=e.includes(c);if(u===!0){n.push(i),i="",r=void 0;continue}const a=Q(c);if(o===!1){if(r===!1&&a===!0){n.push(i),i=c,r=a;continue}if(r===!0&&a===!1&&i.length>1){const l=i.at(-1);n.push(i.slice(0,Math.max(0,i.length-1))),i=l+c,r=a;continue}}i+=c,r=a,o=u}return n.push(i),n}function G(t){return t?t[0].toUpperCase()+t.slice(1):""}function V(t,s){return t?(Array.isArray(t)?t:j(t)).map(e=>G(s?.normalize?e.toLowerCase():e)).join(""):""}function ot(t,s){return t?(Array.isArray(t)?t:j(t)).map(e=>e.toLowerCase()).join("-"):""}function z(t){return{type:"root",children:t.value.map(_)}}function _(t){if(typeof t=="string")return{type:"text",value:t};const[s,e,...n]=t;return{type:"element",tag:s,props:e,children:n.map(_)}}const C=(t,s)=>{const e=t._conditions;return e.length>0?`(${e.join(` ${s} `)})`:""},v=t=>{const s=[],e={_conditions:s,where(n,i,r){let o;switch(i.toUpperCase()){case"IN":case"NOT IN":if(Array.isArray(r)){const c=r.map(u=>y(u)).join(", ");o=`"${String(n)}" ${i.toUpperCase()} (${c})`}else throw new TypeError(`Value for ${i} must be an array`);break;case"BETWEEN":case"NOT BETWEEN":if(Array.isArray(r)&&r.length===2)o=`"${String(n)}" ${i.toUpperCase()} ${y(r[0])} AND ${y(r[1])}`;else throw new Error(`Value for ${i} must be an array with two elements`);break;case"IS NULL":case"IS NOT NULL":o=`"${String(n)}" ${i.toUpperCase()}`;break;case"LIKE":case"NOT LIKE":o=`"${String(n)}" ${i.toUpperCase()} ${y(r)}`;break;default:o=`"${String(n)}" ${i} ${y(typeof r=="boolean"?Number(r):r)}`}return s.push(`${o}`),e},andWhere(n){const i=n(v());return s.push(C(i,"AND")),e},orWhere(n){const i=n(v());return s.push(C(i,"OR")),e}};return e},K=(t,s)=>{const e={conditions:[],selectedFields:[],offset:0,limit:0,orderBy:[],count:{field:"",distinct:!1}},n={__params:e,andWhere(r){const o=r(v());return e.conditions.push(C(o,"AND")),n},orWhere(r){const o=r(v());return e.conditions.push(C(o,"OR")),n},path(r){return n.where("path","=",k(r))},skip(r){return e.offset=r,n},where(r,o,c){return n.andWhere(u=>u.where(String(r),o,c)),n},limit(r){return e.limit=r,n},select(...r){return r.length&&e.selectedFields.push(...r),n},order(r,o){return e.orderBy.push(`"${String(r)}" ${o}`),n},async all(){return s(t,i()).then(r=>r||[])},async first(){return s(t,i({limit:1})).then(r=>r[0]||null)},async count(r="*",o=!1){return s(t,i({count:{field:String(r),distinct:o}})).then(c=>c[0].count)}};function i(r={}){let o="SELECT ";if(r?.count)o+=`COUNT(${r.count.distinct?"DISTINCT ":""}${r.count.field}) as count`;else{const u=Array.from(new Set(e.selectedFields));o+=u.length>0?u.map(a=>`"${String(a)}"`).join(", "):"*"}o+=` FROM ${P[String(t)]}`,e.conditions.length>0&&(o+=` WHERE ${e.conditions.join(" AND ")}`),e.orderBy.length>0?o+=` ORDER BY ${e.orderBy.join(", ")}`:o+=" ORDER BY stem ASC";const c=r?.limit||e.limit;return c>0&&(e.offset>0?o+=` LIMIT ${c} OFFSET ${e.offset}`:o+=` LIMIT ${c}`),o}return n};function y(t){return`'${String(t).replace(/'/g,"''")}'`}function I(t){return s=>(s=s||{},(t||[]).filter(e=>typeof s[e]<"u").reduce((e,n)=>Object.assign(e,{[n]:s[n]}),{}))}async function D(t,s=[]){t.__params?.orderBy?.length||(t=t.order("stem","ASC"));const n=await t.orWhere(a=>a.where("navigation","<>","false").where("navigation","IS NULL")).select("navigation","stem","path","title","meta",...s||[]).all(),{contents:i,configs:r}=n.reduce((a,l)=>{if(String(l.stem).split("/").pop()===".navigation"){l.title=l.title?.toLowerCase()==="navigation"?"":l.title;const p=l.path.split("/").slice(0,-1).join("/")||"/";a.configs[p]={...l,...l.body}}else a.contents.push(l);return a},{configs:{},contents:[]}),o=a=>({...I(["title",...s])(a),...a.meta,...x(a?.navigation)?a.navigation:{}}),c=a=>({...I(["title",...s])(a),...x(a?.navigation)?a.navigation:{}}),u=i.reduce((a,l)=>{const p=l.path.substring(1).split("/"),h=l.stem.split("/"),m=!!h[h.length-1]?.match(/([1-9]\d*\.)?index/g),E=f=>({title:f.title,path:f.path,stem:f.stem,children:[],...c(f)}),d=E(l);if(m){const f=r[d.path];if(typeof f?.navigation<"u"&&f?.navigation===!1)return a;if(l.path!=="/"){const g=E(l);d.children.push(g)}f&&Object.assign(d,o(f))}if(p.length===1){const f=a.find(g=>g.path===d.path&&g.page===!1);return m&&f?Object.assign(f,{page:void 0,children:[...d.children||[],...f.children||[]]}):a.push(d),a}const L=p.slice(0,-1).reduce((f,g,O)=>{const N="/"+p.slice(0,O+1).join("/"),S=r[N];if(typeof S?.navigation<"u"&&S.navigation===!1)return[];let b=f.find($=>$.path===N);if(!b){const $=S?o(S):{};b={...$,title:$.title||Y(g),path:N,stem:h.slice(0,O+1).join("/"),children:[],page:!1},f.push(b)}return b.children},a),w=L.find(f=>f.path===d.path&&f.page===!1);return w?Object.assign(w,{...d,page:void 0,children:[...d.children||[],...w.children||[]]}):L.push(d),a},[]);return U(u)}function U(t){const s=t;for(const e of s)e.children?.length?U(e.children):delete e.children;return t}function x(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}const Y=t=>t.split(/[\s-]/g).map(V).join(" ");async function J(t,s,e){const{before:n=1,after:i=1,fields:r=[]}=e||{},o=await D(t,r),c=W(o),u=c.findIndex(p=>p.path===s),a=u===-1?[]:c.slice(u-n,u),l=u===-1?[]:c.slice(u+1,u+i+1);return[...Array.from({length:n}).fill(null).concat(a).slice(a.length),...l.concat(Array.from({length:i}).fill(null)).slice(0,i)]}function W(t){return t.flatMap(e=>{const n=e.children?W(e.children):[];return e.page===!1||n.length&&n.find(i=>i.path===e.path)?n:[{...e,children:void 0},...n]})}const R=/^h([1-6])$/,X=t=>R.test(t);async function Z(t,s){const{ignoredTags:e=[],extraFields:n=[]}=s||{};return(await t.where("extension","=","md").select("path","body","description","title",...n||[]).all()).flatMap(r=>tt(r,{ignoredTags:e,extraFields:n}))}function tt(t,{ignoredTags:s,extraFields:e}){const n=!t.body||t.body?.type==="root"?t.body:z(t.body),i=t.path??"",r=I(e)(t),o=[{...r,id:i,title:t.title||"",titles:[],content:(t.description||"").trim(),level:1}];if(!n?.children)return o;let c=1,u=0;const a=[t.title??""];for(const l of n.children){const p=l.tag||"";if(X(p)){const h=Number(p.match(R)?.[1]??0),m=A(l).trim();h===1?a.splice(0,a.length):h<u?a.splice(h-1,a.length-1):h===u&&a.pop(),o.push({...r,id:`${i}#${l.props?.id}`,title:m,titles:[...a],content:"",level:h}),a.push(m),u=h,c+=1}else{const h=A(l,s).trim();if(c===1&&o[c-1]?.content===h)continue;o[c-1].content=`${o[c-1].content} ${h}`.trim()}}return o}function A(t,s=[]){let e="";return t.type==="text"&&(e+=t.value||""),s.includes(t.tag??"")?"":(t.children?.length&&(e+=t.children.map(n=>A(n,s)).filter(Boolean).join("")),e)}const et=t=>{const s=B()?.ssrContext?.event;return K(t,(e,n)=>nt(s,e,n))};function at(t,s){return T(t,e=>D(e,s))}function ct(t,s,e){return T(t,n=>J(n,s,e))}function lt(t,s){return T(t,e=>Z(e,s))}async function nt(t,s,e){return window.WebAssembly?rt(s,e):H(t,String(s),e)}async function rt(t,s){return await F(()=>import("./Cfniytrd.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(n=>n.loadDatabaseAdapter(t)).then(n=>n.all(s))}function T(t,s){const e=et(t),n={where(i,r,o){return e.where(String(i),r,o),n},andWhere(i){return e.andWhere(i),n},orWhere(i){return e.orWhere(i),n},order(i,r){return e.order(String(i),r),n},then(i,r){return s(e).then(i,r)},catch(i){return this.then(void 0,i)},finally(i){return this.then(void 0,void 0).finally(i)},get[Symbol.toStringTag](){return"Promise"}};return n}export{at as a,ct as b,et as c,ot as k,V as p,lt as q,z as t};
